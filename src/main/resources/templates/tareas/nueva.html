<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="layout :: layout(~{::title}, ~{::section})">
<head>
    <title>Nueva Tarea</title>
</head>
<body>
<section class="container mt-4">
    <h2 class="mb-4">Asignar Nueva Tarea</h2>

    <form th:action="@{/tareas/guardar}" method="post">
        <!-- Campo oculto: ID de la asignación -->
        <input type="hidden" name="asignacionId" th:value="${asignacionId}" />

        <!-- Mostrar combo solo si no viene una asignación preseleccionada -->
        <div th:if="${asignacionId == null}" class="mb-3">
            <label for="asignacion" class="form-label">Asignación</label>
            <select id="asignacion" name="asignacionId" class="form-select" required>
                <option value="">Seleccione una asignación...</option>
                <option th:each="a : ${asignaciones}"
                        th:value="${a.id}"
                        th:text="'Empleado ' + ${a.empleadoId} + ' - Proyecto ' + ${a.proyectoId}">
                </option>
            </select>
        </div>

        <!-- Descripción -->
        <div class="mb-3">
            <label for="descripcion" class="form-label">Descripción</label>
            <input type="text" id="descripcion" name="descripcion" class="form-control" required>
        </div>

        <!-- Estado -->
        <div class="mb-3">
            <label for="estado" class="form-label">Estado</label>
            <select id="estado" name="estado" class="form-select">
                <option value="Pendiente">Pendiente</option>
                <option value="Completada">Completada</option>
            </select>
        </div>

        <button type="submit" class="btn btn-success">Guardar</button>
        <a th:href="@{/asignaciones}" class="btn btn-secondary">Cancelar</a>
    </form>
</section>
</body>
</html>
